{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cauban Cookie Clicker</title>
    <link rel="stylesheet" href="{% static 'cookie_clicker/style.css' %}">
</head>
<body data-initial-gold="{{ gold }}"
      data-initial-gpc="{{ gpc }}"
      data-initial-cps="{{ cps }}"
      data-initial-upgrade-gpc-price="{{ upgrade_gpc_price }}"
      data-initial-buy-cps-price="{{ buy_cps_price }}"
      data-initial-buy-cps-amount="{{ buy_cps_amount }}" {# IMPORTANT: Added this #}
      data-auto-generate-url="{% url 'cookie_clicker:auto_generate_gold' %}">

    <div class="game-container">
        <h1>Cauban Cookie Clicker</h1>
        <div class="gold-display">Gold: <span id="gold-count">{{ gold }}</span></div>
        <div class="info">Gold Per Click: <span id="gpc-count">{{ gpc }}</span></div>
        <div class="info">Auto-Clicks/Second: <span id="cps-count">{{ cps }}</span></div>

        <button id="cookie-button" data-url="{% url 'cookie_clicker:click' %}">üç™</button>

        <div class="upgrades">
            <button id="upgrade-gpc-button" class="upgrade-button"
                    data-url="{% url 'cookie_clicker:upgrade' %}">
                Upgrade GPC (Cost: <span id="upgrade-gpc-price">{{ upgrade_gpc_price }}</span> Gold)
            </button>
        </div>

        <div class="auto-clicker-section">
            <button id="buy-autoclicker-button" class="buy-auto-clicker-button"
                    data-url="{% url 'cookie_clicker:buy_autoclicker' %}">
                Buy Auto-Clicker (Cost: <span id="buy-cps-price">{{ buy_cps_price }}</span> Gold)
            </button>
        </div>

        <button id="reset-game-button" class="reset-button"
                data-url="{% url 'cookie_clicker:reset' %}">
            Reset Game
        </button>
    </div>

    {# Load JavaScript modules. 'type="module"' is crucial for ES Modules #}
    <script type="module" src="{% static 'cookie_clicker/gameAPI.js' %}"></script>
    <script type="module" src="{% static 'cookie_clicker/gameUI.js' %}"></script>
    <script type="module" src="{% static 'cookie_clicker/gameClient.js' %}"></script>
</body>
</html>